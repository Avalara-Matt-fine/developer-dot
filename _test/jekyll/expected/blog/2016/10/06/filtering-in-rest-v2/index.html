<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="robots" content="index,follow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer  : Filtering in AvaTax REST v2</title>
    <meta name="description" content="">

    <meta property="og:title" content="Home"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://developer.avalara.com/"/>
    <meta property="og:site_name" content="Avalara Developer Network"/>
    <meta property="og:description" content="Avalara AvaTax Accurate and easy sales tax calculation Automatically tie your non-taxable transactions directly to the correct exemption or reseller certificate. Determine accurate taxability & duties for millions of products and services in over 100 countries."/>

    <link rel="apple-touch-icon" sizes="57x57" href="/public/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/public/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/public/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/public/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/public/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/public/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/public/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/public/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/public/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/public/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/public/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/public/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff ">
    <meta name="msapplication-TileImage" content="/public/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff ">

    <link rel="stylesheet" href="/public/css/style.css">
    
</head>


<body id="top" data-spy="scroll" data-target="#bootstrap-scrollspy" data-product=blog>
<header>
    <div class="pageTitle">
        <a href="/">
            <img src="/public/images/Avalara_logo.svg" alt="Avalara Developer Network">
            <span>Developer</span>
        </a>
        <span class="slash">/&nbsp;</span><a href="/blog">blog</a>
    </div>
    <nav class="navbar navbar-default navbar-static">
        <div class="navbar-header">
            <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
                <span>Menu</span>
            </button>
        </div>
        <div class="collapse navbar-collapse js-navbar-collapse">
            <ul class="nav navbar-nav ">
                <li class="home"><a href="/"><span class="text-uppercase">Welcome</span></a></li>
                <li class="apis visible-xs-block"><a href="/avalara-apis"><span class="text-uppercase">API</span>s</a></li>
                <li class="apis dropdown dropdown-large hidden-xs">
                    <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">API</span>s <i class="caret"></i></a>
                    <div class="dropdown-menu dropdown-menu-large">
                        <div class="row">
                            <div class="col-md-12"><a href="/avalara-apis">APIs overview</a></div>
                        </div>
                        <div class="row">
                            <div class="col-sm-8">
                                <h2>Tax calculation</h2>
                                
                                <h4>Avalara AvaTax</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/avatax">Overview</a></li>
                                    
                                    <li><a href="/avatax/use-cases">Use cases</a></li>
                                    
                                    <li><a href="/avatax/api-reference/tax/v1">API references</a></li>
                                    
                                    <li><a href="/avatax/get-started">Set up your sandbox</a></li>
                                    
                                    <li><a href="/avatax/testing-your-integration">Test your integration</a></li>
                                    
                                    <li><a href="/avatax/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara Communications</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/communications">Overview</a></li>
                                    
                                    <li><a href="/communications/api-reference/saas/soap">API references</a></li>
                                    
                                    <li><a href="/communications/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara Excise</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/excise">Overview</a></li>
                                    
                                    <li><a href="/excise/api-reference/tax-determination/v5_18_0">API references</a></li>
                                    
                                    <li><a href="/excise/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                
                                <h4>Avalara LandedCost</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/landedcost">Overview</a></li>
                                    
                                    <li><a href="/landedcost/api-reference/v3">API references</a></li>
                                    
                                </ul>
                                
                            </div>
                            <div class="col-sm-4">
                                <h2>Compliance document management</h2>
                                
                                <h4>Avalara CertCapture</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/certcapture">Overview</a></li>
                                    
                                    <li><a href="http://docs.certcapture6xrest.apiary.io/">API references</a></li>
                                    
                                    <li><a href="/certcapture/certification">Integration checklists</a></li>
                                    
                                </ul>
                                
                                <h2>Returns &amp; filing</h2>
                                
                                
                                <h4>Avalara TrustFile</h4>
                                <ul class="pipe">
                                    
                                    <li><a href="/trustfile">Overview</a></li>
                                    
                                    <li><a href="/trustfile/api-reference/core/v3">API references</a></li>
                                    
                                </ul>
                                
                            </div>
                        </div>
                    </div>
                </li>
                <li class="certification"><a href="/certification"><span class="text-uppercase">Become Certified</span></a></li>
                <li class="resources dropdown dropdown-large hidden-xs">
                    <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">Resources</span> <b class="caret"></b></a>
                    <ul class="dropdown-menu dropdown-menu-large">
                        <li><a href="/blog">Developer Blog</a></li>
                        <li><a href="/resources/preferred-developers">Preferred developers</a></li>
                        <li><a href="https://community.avalara.com/avalara/category_sets/developers">Help Forum</a></li>
                    </ul>
                </li>
                <li class="resources visible-xs-block"><a href="/blog"><span class="text-uppercase">Developer Blog</span></a></li>
                <li class="resources visible-xs-block"><a href="/resources/preferred-developers"><span class="text-uppercase">Preferred developers</span></a></li>
                <li class="resources visible-xs-block"><a href="https://community.avalara.com/avalara/category_sets/developers"><span class="text-uppercase">Help Forum</span></a></li>
                <li class="resources visible-xs-block"><a href="/search"><span class="text-uppercase">Search</span></a></li>
                <li class="hdr-search-icon hidden-xs">
                    <i class="mouse glyphicon glyphicon-search mouse"></i>
                </li>
                <form class="hdr-search-form horizontal hidden-xs hidden">
                    <div class="row">
                        
                        <div class="col-md-9"><label><input type="checkbox" id="filterSite"> Search entire site</label></div>
                        <div class="col-md-3">
                            <button type="button" class="close" aria-label="Close"><span>&times;</span></button>
                        </div>
                        
                    </div>
                    <div class="row">
                        <div class="form-group col-md-9">
                            <input class="form-control" type="search" placeholder="Search Developer / Blog" >
                            <span class="form-control-feedback">!</span>
                        </div>
                        <div class="form-group col-md-3">
                            <input type="submit" class="btn btn-primary" value="Search">
                        </div>
                    </div>
                </form>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid blog">
    
    
    <section class="row padding-sides">
        <main class="col-md-12">
<div class="breadcrumbs blog">
    <div class="col-md-12">
        <ul class="pipe">
            <li class="text-uppercase">Resources</li>
            <li class="text-uppercase"><a href="/blog">Developer Blog</a></li>
            
            <li class="text-uppercase">Filtering in AvaTax REST v2</li>
            
        </ul>
    </div>
</div>



<div class="half">
    <h1>Filtering in AvaTax REST v2</h1>
    <p class="byline">By Ted Spence | October 06, 2016</p>
    <p class="blog-content"><h1 id="im-sure-i-left-this-somewhere">I’m sure I left this somewhere…</h1>

<p>The REST API pattern is designed to make it easy to store and retrieve data.  Every piece of data in REST is assigned a single unique URL - and you can always fetch that item back by retrieving its URL.  It works a bit like this:</p>

<table class="styled-table">
    <tr>
        <th>Note</th>
        <th>HTTP Action</th>
        <th>Request</th>
        <th>Result</th>
    </tr>
    <tr>
        <td>Store data by **POST**ing to a URL.</td>
        <td><pre>POST /api/v2/companies</pre></td>
        <td>In the request body: <pre>{ "name": "Bob's Artisan Pottery" }</pre></td>
        <td>In the HTTP headers: <pre>Location: /api/v2/companies/123</pre></td>
    </tr>
    <tr>
        <td>Fetch data by **GET**ting from that URL.</td>
        <td><pre>GET /api/v2/companies/123</pre></td>
        <td></td>
        <td>In the response body: <pre>{ "name": "Bob's Artisan Pottery" }</pre></td>
    </tr>
</table>

<p>This works great as long as you know the URL of the thing.  How do you find something if you don’t know what it is?</p>

<h1 id="listing-all-objects">Listing All Objects</h1>

<p>Let’s say you have three companies, and these are their URLs:</p>
<ul class="normal">
<li><pre>/api/v2/companies/123</pre></li>
<li><pre>/api/v2/companies/456</pre></li>
<li><pre>/api/v2/companies/789</pre></li>
</ul>

<p>You can fetch all of them back as follows:</p>
<h3 id="request">Request</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>GET /api/v2/companies
</code></pre>
</div>
<h3 id="result">Result</h3>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="p">[</span> 
    <span class="p">{</span> <span class="s2">"id"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="p">...</span> <span class="p">},</span> 
    <span class="p">{</span> <span class="s2">"id"</span><span class="p">:</span> <span class="mi">456</span><span class="p">,</span> <span class="p">...</span> <span class="p">},</span> 
    <span class="p">{</span> <span class="s2">"id"</span><span class="p">:</span> <span class="mi">789</span><span class="p">,</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">]</span>
</code></pre>
</div>

<p>Voila! In AvaTax, your credentials will automatically allow you to access all companies within your account with no extra hassle.  The query to &lt;pre&gt;GET /api/v2/companies&lt;/pre&gt; will return all three objects.  If you only have three objects this is the easiest way to find what you want.</p>

<h1 id="what-if-i-have-more-than-three-objects">What if I have more than three objects?</h1>

<p>Sooner or later it will be a nuisance to fetch everything.  To reduce the number of records you get, you’ll have to start filtering.</p>

<p>In the <a href="https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md#97-filtering">Microsoft REST API Guidelines</a>, Microsoft established a nice and friendly standard for finding objects.  You can use a simplified search syntax to find something you want.  Let’s say you want to search for the company whose names start with ‘A’:</p>

<h3 id="request-1">Request</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>GET /api/v2/companies?$filter=name ge A and name lt B
</code></pre>
</div>
<h3 id="result-1">Result</h3>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="p">[</span> 
    <span class="p">{</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Aardvark"</span> <span class="p">...</span> <span class="p">},</span> 
    <span class="p">{</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Aaron's Antiques"</span> <span class="p">},</span> 
    <span class="p">{</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Andes Climbing Supply"</span> <span class="p">}</span>
<span class="p">]</span>
</code></pre>
</div>

<p>You can use these same types of filters in lots of different ways - here are a few samples:</p>

<ul class="normal">
<li><pre>GET /api/v2/companies?$filter=name eq 'Bob''s Artisan Pottery'</pre></li>
<li><pre>GET /api/v2/companies?$filter=id gt 100000</pre></li>
<li><pre>GET /api/v2/companies?$filter=isTest eq true and isActive eq true</pre></li>
</ul>

<h1 id="what-filtering-options-are-available">What filtering options are available?</h1>

<p>Avalara supports all filtering language options specified by Microsoft in its standard, plus a few extra items.  We support some useful features like the ability to nest filter statements - you can use AND and OR clauses to construct more complex searches.  You can retrieve a large number of items in a list.</p>

<p>The full list of <a href="/avatax/filtering-in-rest">available filtering options is here</a>.  Please let us know what you think!</p>

<p>Happy Filtering!</p>

<p>–Ted Spence, Director, AvaTax Core Engine</p>
</p>
    <p class="btn-callout"><a href="/blog" role="button">Back to posts</a></p>
</div>
</main>
    </section>
    
    
    <section class="row padding-sides">
        <main class="col-md-12"><div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'developeravalaracom'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</main>
    </section>
    
</div>
<footer class="navbar navbar-default">
    <ul class="social">
        <li class="twitter"><a href="https://twitter.com/Avalara">Twitter</a></li>
        <li class="facebook"><a href="https://www.facebook.com/avalara">Facebook</a></li>
        <li class="linkedin"><a href="https://www.linkedin.com/company/avalara">LinkedIn</a></li>
        <li class="youtube"><a href="https://www.youtube.com/user/Avalara1">Youtube</a></li>
    </ul>
    
    
    <ul class="github">
        <li><a href="https://github.com/Avalara/developer-dot/edit/master/_posts/2016-10-06-filtering-in-rest-v2.md">Edit this page on GitHub</a></li>
    </ul>
    
    <ul class="global">
        <li><a href="https://www.avalara.com/"><span class="icon-sphere"></span>Avalara.com</a></li>
        <li><a href="https://help.avalara.com/"><span class="icon-help"></span>Help Center</a></li>
    </ul>
    <ul class="legal">
        <li>&copy; Avalara, Inc. All rights reserved</li>
        <li><a href="https://www.avalara.com/site-terms/">Terms of use</a></li>
        <li><a href="https://www.avalara.com/privacy-policy/">Privacy Policy</a></li>
    </ul>
</footer>

<script src="/public/js/vendor/jquery-2.2.4.min.js"></script>
<script src="/public/js/vendor/bootstrap.min.js"></script>
<script src="/public/js/site.js"></script>


<script src='/public/js/vendor/aws-sdk-2.5.3.min.js'></script>
<script>AWS.config.region = 'us-west-2';</script>





<!-- Google Tag Manager -->
<noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MKB5LP" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<script>(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-MKB5LP');</script>
<!-- End Google Tag Manager -->
</body>
</html>
